# Структура Backend проекта

В этом разделе подробно описана структура backend части проекта, созданного с помощью Runlify.

## Общая структура

```
backend/
├── src/                    # Исходный код
│   ├── meta/              # Метаданные и описания сущностей
│   │   ├── addCatalogs.ts # Описания сущностей
│   │   ├── addMenu.ts     # Конфигурация меню
│   │   ├── addWscEntities.ts # Дополнительные сущности
│   │   ├── regenBasedOnMeta.ts # Регенерация кода
│   │   ├── metadata.json  # Сгенерированные метаданные
│   │   └── options.json   # Настройки генерации
│   │
│   ├── generated/         # Сгенерированный код
│   ├── rest/              # REST API endpoints
│   │   ├── healthRouter.ts # Проверка здоровья
│   │   ├── restRouter.ts   # Основной роутер
│   │   └── getMetricsHandler.ts # Метрики
│   │
│   ├── graph/             # GraphQL схемы и резолверы
│   ├── workers/           # Фоновые задачи
│   ├── utils/             # Утилиты
│   ├── types/             # TypeScript типы
│   ├── systemHooks/       # Системные хуки
│   ├── metrics/           # Метрики и мониторинг
│   ├── init/             # Инициализация
│   ├── integrationClients/# Клиенты для интеграций
│   ├── decorators/       # TypeScript декораторы
│   ├── clients/          # API клиенты
│   ├── cli/              # Командная строка
│   ├── businessTests/    # Бизнес-тесты
│   ├── app/              # Основной код приложения
│   ├── bots/             # Боты и автоматизация
│   ├── adm/              # Административные функции
│   └── config/           # Конфигурация
│
├── prisma/               # Prisma конфигурация
│   ├── schema.prisma     # Схема базы данных
│   └── migrations/       # Миграции
│
├── compose/             # Docker конфигурация
│   └── docker-compose.yml
│
├── config/             # Конфигурационные файлы
│
└── chart/             # Helm чарты для Kubernetes
```

## Подробное описание каталогов

### src/meta/
Метаданные проекта:
- `addCatalogs.ts` - описания основных сущностей
- `addMenu.ts` - конфигурация навигационного меню
- `addWscEntities.ts` - дополнительные сущности
- `regenBasedOnMeta.ts` - скрипт регенерации кода
- `metadata.json` - сгенерированные метаданные
- `options.json` - настройки генерации

### src/rest/
REST API endpoints:
- `healthRouter.ts` - проверка здоровья сервиса
- `restRouter.ts` - основной роутер API
- `getMetricsHandler.ts` - обработчик метрик
- `initRestEndpoints.ts` - инициализация endpoints

### src/generated/
Автоматически сгенерированный код:
- API endpoints
- Типы данных
- Валидаторы

### src/graph/
GraphQL схемы и резолверы:
- Middleware

### src/workers/
Фоновые задачи:
- Обработка очередей
- Периодические задачи
- Асинхронные операции

### src/systemHooks/
Системные хуки:
- Обработчики событий
- Интеграционные точки
- Расширения функционала

### src/integrationClients/
Клиенты для внешних сервисов:
- API клиенты
- Коннекторы
- Адаптеры

### src/businessTests/
Бизнес-тесты:
- Проверка бизнес-логики
- Интеграционные тесты
- Сценарии использования

## Ключевые файлы

### Конфигурационные файлы
- `package.json`: Зависимости и скрипты
- `tsconfig.json`: Настройки TypeScript
- `runlify.json`: Конфигурация Runlify
- `runlify.developer.json`: Локальные настройки
- `.env`: Переменные окружения
- `Dockerfile`: Сборка контейнера
- `.gitlab-ci.yml`: CI/CD конфигурация

### Скрипты
- `initDev.sh`: Инициализация окружения разработки
- `initLocal.sh`: Инициализация локального окружения
- `initRoles.sh`: Инициализация ролей
- `migrateDbs.sh`: Миграции баз данных
- `prepare.sh`: Подготовка проекта
- `check.sh`: Проверка кода
- `ci-notify.sh`: Уведомления CI

## Рекомендации по работе

1. **Метаданные**
   - Группируйте связанные сущности
   - Используйте типизацию
   - Документируйте сложные связи

2. **Кастомизация**
   - Расширяйте через src/rest/
   - Создавайте middleware
   - Добавляйте бизнес-логику в services/

3. **Тестирование**
   - Пишите unit-тесты
   - Создавайте интеграционные тесты
   - Используйте фикстуры

4. **Безопасность**
   - Настраивайте права доступа
   - Валидируйте входные данные
   - Используйте middleware

## Следующие шаги

- Изучите [структуру frontend проекта](./12-frontend-structure.md)
- Посмотрите [примеры использования](./07-examples.md)
- Ознакомьтесь с [API Reference](./06-api-reference.md) 