# Структура Runlify

В этом разделе подробно описана структура фреймворка Runlify, включая все каталоги и их назначение.

## Общая структура

```
runlify/
├── src/                      # Исходный код фреймворка
│   ├── commands/            # Команды CLI
│   ├── documentation/       # Генерация документации
│   ├── extensions/          # Расширения и плагины
│   ├── projectsGeneration/  # Генерация проектов
│   │   ├── builders/       # Билдеры для метаданных
│   │   ├── commonEntities/ # Общие сущности
│   │   ├── defaultCatalogs/# Каталоги по умолчанию
│   │   ├── fileCleaners/   # Очистка файлов
│   │   ├── generators/     # Генераторы кода
│   │   ├── links/         # Работа со связями
│   │   └── modules/       # Модули системы
│   ├── refs/              # Справочники и константы
│   ├── templates/         # Шаблоны для генерации
│   └── utils/            # Утилиты
├── bin/                   # Исполняемые файлы
└── docs/                 # Документация
```

## Подробное описание каталогов

### src/commands/
Содержит команды CLI для управления проектом:
- `init.ts` - Инициализация нового проекта
- `generate.ts` - Генерация кода
- `migrate.ts` - Управление миграциями
- `start.ts` - Запуск приложения

### src/projectsGeneration/
Основной модуль генерации проектов:

#### builders/
Билдеры для создания метаданных:
```
builders/
├── BaseSavableEntityBuilder.ts  # Базовый класс для сущностей
├── SystemMetaBuilder.ts         # Построитель системы
├── CatalogBuilder.ts           # Построитель каталогов
├── DocumentBuilder.ts          # Построитель документов
├── InfoRegistryBuilder.ts      # Построитель инфо-регистров
├── SumRegistryBuilder.ts       # Построитель регистров накопления
├── fields/                     # Построители полей
│   ├── BaseFieldBuilder.ts     # Базовый класс полей
│   ├── ScalarFieldBuilder.ts   # Скалярные поля
│   ├── LinkFieldBuilder.ts     # Поля-ссылки
│   └── ViewLinkFieldBuilder.ts # Поля для отображения
├── menu/                      # Построение меню
├── validation/               # Валидация
└── ui/                      # UI компоненты
```

#### generators/
Генераторы различных частей приложения:
```
generators/
├── api/           # Генерация API
├── database/      # Генерация БД
├── frontend/      # Генерация фронтенда
└── types/        # Генерация типов
```

#### modules/
Модули системы:
```
modules/
├── auth/         # Аутентификация
├── cache/        # Кэширование
├── search/       # Поиск
└── storage/      # Хранилище
```

### src/templates/
Шаблоны для генерации кода:
```
templates/
├── backend/      # Шаблоны бэкенда
│   ├── api/     # API endpoints
│   ├── models/  # Модели данных
│   └── tests/   # Тесты
├── frontend/    # Шаблоны фронтенда
│   ├── components/ # React компоненты
│   ├── forms/     # Формы
│   └── pages/     # Страницы
└── common/      # Общие шаблоны
```

### src/extensions/
Расширения и плагины:
```
extensions/
├── database/    # Расширения для БД
├── auth/        # Расширения аутентификации
└── ui/         # Расширения UI
```

### src/documentation/
Генерация документации:
```
documentation/
├── generators/  # Генераторы документации
├── templates/   # Шаблоны документации
└── examples/    # Примеры
```

### src/utils/
Утилиты и вспомогательные функции:
```
utils/
├── fs/         # Работа с файловой системой
├── string/     # Работа со строками
├── validation/ # Валидация
└── logger/     # Логирование
```

## Ключевые файлы

### Конфигурационные файлы
- `package.json` - Зависимости и скрипты
- `tsconfig.json` - Конфигурация TypeScript
- `.eslintrc.js` - Правила линтера
- `.prettierrc` - Форматирование кода

### Исполняемые файлы
- `bin/runlify` - Основной CLI интерфейс
- `bin/runlify-init` - Инициализация проекта
- `bin/runlify-generate` - Генерация кода

## Сгенерированные файлы в проекте

При работе с проектом Runlify генерирует следующую структуру:

```
my-project/
├── src/
│   ├── generated/           # Сгенерированный код
│   │   ├── api/            # API endpoints
│   │   ├── models/         # Модели данных
│   │   ├── types/          # TypeScript типы
│   │   └── components/     # React компоненты
│   ├── meta/               # Метаданные проекта
│   │   ├── addCatalogs.ts  # Описания каталогов
│   │   ├── addMenu.ts      # Конфигурация меню
│   │   └── index.ts        # Точка входа
│   └── config/            # Конфигурация
├── prisma/                # Prisma схемы и миграции
└── compose/              # Docker конфигурация
```

## Рекомендации по работе со структурой

1. **Метаданные**
   - Размещайте описания сущностей в `src/meta/`
   - Группируйте связанные сущности в отдельные файлы
   - Используйте index.ts для экспорта

2. **Генерация**
   - Сгенерированный код находится в `src/generated/`
   - Не модифицируйте сгенерированные файлы вручную
   - Используйте хуки для кастомизации

3. **Конфигурация**
   - Основные настройки в `runlify.json`
   - Локальные настройки в `runlify.developer.json`
   - Переменные окружения в `.env`

4. **Расширение**
   - Создавайте кастомные билдеры в `src/builders/`
   - Добавляйте плагины в `src/extensions/`
   - Используйте хуки для модификации поведения

## Следующие шаги

- Изучите [API Reference](./06-api-reference.md) для подробного описания классов
- Посмотрите [примеры использования](./07-examples.md) для практических сценариев
- Ознакомьтесь с [лучшими практиками](./08-best-practices.md) для эффективной работы 