# Структура Runlify

В этом разделе подробно описана структура фреймворка Runlify, включая все каталоги и их назначение.

## Общая структура

```
runlify/
├── src/                      # Исходный код фреймворка
│   ├── meta/                # Метаданные проекта
│   │   ├── addCatalogs.ts   # Описания каталогов
│   │   ├── addMenu.ts       # Конфигурация меню
│   │   ├── addWscEntities.ts # Дополнительные сущности
│   │   └── regenBasedOnMeta.ts # Регенерация кода
│   ├── rest/                # REST API
│   │   ├── healthRouter.ts  # Проверка здоровья
│   │   ├── restRouter.ts    # Основной роутер
│   │   └── getMetricsHandler.ts # Метрики
│   ├── prisma/              # Prisma схемы и миграции
│   │   └── schema.prisma    # Схема базы данных
│   ├── compose/             # Docker конфигурация
│   │   └── docker-compose.yml # Docker Compose
│   └── chart/               # Helm чарты
│       └── values.yaml      # Значения для деплоя
├── frontend/                # Frontend приложение
│   ├── src/
│   │   ├── adm/            # Административный интерфейс
│   │   ├── components/     # React компоненты
│   │   ├── generated/      # Сгенерированный код
│   │   ├── hooks/         # React хуки
│   │   ├── layouts/       # Макеты страниц
│   │   ├── pages/         # Страницы
│   │   ├── services/      # Сервисы
│   │   ├── store/         # Управление состоянием
│   │   ├── styles/        # Стили
│   │   ├── types/         # TypeScript типы
│   │   └── utils/         # Утилиты
│   ├── public/            # Публичные файлы
│   ├── config/           # Конфигурация
│   └── tests/            # Тесты
└── docs/                 # Документация
```

## Подробное описание каталогов

### src/meta/
Содержит метаданные проекта:
- `addCatalogs.ts` - Описания каталогов и их полей
- `addMenu.ts` - Конфигурация меню и навигации
- `addWscEntities.ts` - Дополнительные сущности
- `regenBasedOnMeta.ts` - Регенерация кода на основе метаданных

### src/rest/
REST API endpoints:
- `healthRouter.ts` - Проверка здоровья сервиса
- `restRouter.ts` - Основной роутер API
- `getMetricsHandler.ts` - Обработчик метрик

### src/prisma/
Prisma ORM:
- `schema.prisma` - Схема базы данных
- Миграции и сиды

### src/compose/
Docker конфигурация:
- `docker-compose.yml` - Конфигурация контейнеров
- Настройки окружения

### src/chart/
Helm чарты:
- `values.yaml` - Значения для деплоя
- Шаблоны Kubernetes

### frontend/src/
Frontend приложение:

#### adm/
Административный интерфейс:
- Компоненты React Admin
- Настройки и конфигурация

#### components/
React компоненты:
- Переиспользуемые компоненты
- Виджеты
- Формы

#### generated/
Сгенерированный код:
- API клиенты
- Типы данных
- Хуки

#### hooks/
React хуки:
- Кастомные хуки
- Хуки для работы с API

#### layouts/
Макеты страниц:
- Основной макет
- Макеты для разных разделов

#### pages/
Страницы приложения:
- Компоненты страниц
- Роутинг

#### services/
Сервисы:
- API клиенты
- Утилиты для работы с данными

#### store/
Управление состоянием:
- Redux store
- Actions и reducers

#### styles/
Стили:
- CSS модули
- Глобальные стили
- Темизация

#### types/
TypeScript типы:
- Интерфейсы
- Типы данных
- Константы

#### utils/
Утилиты:
- Вспомогательные функции
- Форматирование
- Валидация

## Ключевые файлы

### Конфигурационные файлы
- `package.json` - Зависимости и скрипты
- `tsconfig.json` - Конфигурация TypeScript
- `.eslintrc.js` - Правила линтера
- `.prettierrc` - Форматирование кода
- `.env` - Переменные окружения

### Docker файлы
- `docker-compose.yml` - Конфигурация контейнеров
- `Dockerfile` - Сборка образа
- `.dockerignore` - Исключения для Docker

### Helm файлы
- `values.yaml` - Значения для деплоя
- `Chart.yaml` - Описание чарта
- `templates/` - Шаблоны Kubernetes

## Рекомендации по работе со структурой

1. **Метаданные**
   - Размещайте описания сущностей в `src/meta/`
   - Группируйте связанные сущности в отдельные файлы
   - Используйте index.ts для экспорта

2. **API**
   - Добавляйте новые endpoints в `src/rest/`
   - Следуйте RESTful принципам
   - Документируйте API endpoints

3. **Frontend**
   - Размещайте компоненты в соответствующих директориях
   - Используйте TypeScript для типизации
   - Следуйте принципам React Admin

4. **База данных**
   - Определяйте схемы в `prisma/schema.prisma`
   - Используйте миграции для изменений
   - Документируйте модели

5. **Деплой**
   - Настраивайте Docker в `compose/`
   - Определяйте Helm чарты в `chart/`
   - Используйте переменные окружения

## Следующие шаги

- Ознакомьтесь с лучшими практиками в разделе [Лучшие практики](08-best-practices.md)
- Изучите примеры использования в разделе [Примеры](07-examples.md)
- При возникновении проблем обратитесь к разделу [Устранение неполадок](09-troubleshooting.md) 